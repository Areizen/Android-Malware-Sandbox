function hook_lib(){

    Interceptor.attach(Module.findExportByName(null, 'android_dlopen_ext'),{
        onEnter: function(args){
            // first arg is the path to the library loaded
            var library_path = Memory.readCString(args[0])
            var obj = {"plugin": "library", "name" : library_path};
            send(JSON.stringify(obj));
        },
        onLeave: function(args){
            console.log(args)
            console.log("[+] Loaded")
        }
    })
}

hook_lib()